
#  _____ ____  __  __ 
# |_   _|  _ \|  \/  |
#   | | | |_) | |\/| |
#   | | |  __/| |  | |
#   |_| |_|   |_|  |_|
#                     
# --- macOS-safe TPM bootstrap
#
# Ensure tmux sees Homebrew + system binaries
# set-environment -g PATH "/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"
#
# Give TPM a known plugin dir (silences the unknown-variable error paths)
# set-environment -g TMUX_PLUGIN_MANAGER_PATH "$HOME/.tmux/plugins"
#
# Make tmux launch a login shell so zprofile exports apply (macOS thing)
# set -g default-shell /bin/zsh
# set -g default-command "/bin/zsh -l"
# You will need to clone tpm as follows
#
#
#  ____       _   _   _                 
# / ___|  ___| |_| |_(_)_ __   __ _ ___ 
# \___ \ / _ \ __| __| | '_ \ / _` / __|
#  ___) |  __/ |_| |_| | | | | (_| \__ \
# |____/ \___|\__|\__|_|_| |_|\__, |___/
#                             |___/     
#
# To copy from Nvim in TMUX Session via "OSC 52" into host clipboard
# Also add config in Neovim (see "OSC 52")
# Needs Neovim v0.10+ and a supporting terminal
set -g set-clipboard on 

# Enable RGB colour if running in xterm(1)
set-option -sa terminal-overrides ",xterm*:Tc"

# Change the default $TERM to tmux-256color
set -g default-terminal "screen-256color"

# When using Kitty uncomment:
set-option -sa terminal-features ',xterm-kitty:RGB'

# Necessary for Neovim
set-option -g focus-events on

# No bells at all
set -g bell-action none

# Set vi as the default editor
set -g status-keys vi

# Tweak timing between key sequences
set -s escape-time 0

# Leave it to the terminal app to copy to clipboard
set -g mouse off
# unbind -n MouseDrag1Pane
# unbind -Tcopy-mode MouseDrag1Pane

# When "tmux attach" called on the cli, create a session if one does not already exist
# This is also usefull when used as a start up command for a terminal to directly start in 
# tmux
# new-session -n "#{pane_current_command"


#  _  __                                    
# | |/ /___ _   _ _ __ ___   __ _ _ __  ___ 
# | ' // _ \ | | | '_ ` _ \ / _` | '_ \/ __|
# | . \  __/ |_| | | | | | | (_| | |_) \__ \
# |_|\_\___|\__, |_| |_| |_|\__,_| .__/|___/
#           |___/                |_|        
#
# Change the prefix key to (C)ontrol plus 'a'
set -g prefix C-a
unbind C-b
bind C-a send-prefix

unbind l

# Switch windows by hitting Alt and the Vim movement key
bind-key -n M-h next-window
bind-key -n M-l previous-window

# Switch pane by hitting prefix followed by the corresponding VI movement keys
bind-key h select-pane -L
bind-key l select-pane -R
bind-key k select-pane -U
bind-key j select-pane -D

bind | split-window -h -c "#{pane_current_path}"  # Split window left/right
bind - split-window -v -c "#{pane_current_path}"  # Split window up/down
bind J resize-pane -D 5  # Move border down
bind K resize-pane -U 5  # Move border up
bind L resize-pane -R 5  # Move border right
bind H resize-pane -L 5  # Move border left
unbind '"'
unbind %

# Avoid confirmation before closing a pane
bind-key x kill-pane

# Use vim keys in copy mode
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle

# A key to toggle between smallest and largest sizes if a window is visible in
# multiple places
bind F set -w window-size

# Keys to toggle monitoring activity in a window and the synchronize-panes option
bind m set monitor-activity
bind y set synchronize-panes\; display 'synchronize-panes #{?synchronize-panes,on,off}'

bind-key r source-file ~/.tmux.conf \; display-message "Configuration reloaded."


#  _____ _                    _             
# |_   _| |__   ___ _ __ ___ (_)_ __   __ _ 
#   | | | '_ \ / _ \ '_ ` _ \| | '_ \ / _` |
#   | | | | | |  __/ | | | | | | | | | (_| |
#   |_| |_| |_|\___|_| |_| |_|_|_| |_|\__, |
#                                     |___/ 

# Colours can be found here: https://jonasjacek.github.io/colors/
# default is always transparent
color_light_steel_blue="#afafd7"  #Xterm color146
color_hot_pink="#ff5faf"          #Xterm color205
color_orange="#ffaf00"            #Xterm color214
color_darkest_grey="#262626"      #Xterm color235
color_grey_light="#dadada"        #Xterm color253
color_blue="#0000ff"
color_red="#ff0000"
color_green="#00ff00"
color_black="#000000"

# Message line
set-option -g message-style "fg=${color_darkest_grey},bg=${color_orange}"

# If running inside tmux ($TMUX is set), then change the status line to red
%if #{TMUX}
set -g status-bg "${color_red}"
%endif

set -g status-position bottom

# # default statusbar colors
set-option -g status-style "fg=${color_grey_light},bg=default"

# Switch lines if working with sessions:
# set -g status-left "#[fg=${color_hot_pink},bold] #S #[fg=${color_grey_light},nobold] | "
set -g status-left ""
# The #() just creates a mini shell
# set -g status-left "#(hostname)"

# active/inactive windows
# Icons from here: https://www.nerdfonts.com/cheat-sheet
set -g window-status-current-format "#[fg=${color_hot_pink},bold]  #I:#W"
set -g window-status-format         "#[fg=${color_light_steel_blue},nobold]  #I:#W"

set -g status-right "#[fg=${color_light_steel_blue},nobold] #S"


# pane border
set-option -g pane-active-border-style "fg=${color_hot_pink}"
set-option -g pane-border-style "fg=${color_light_steel_blue}"

# pane number display
set-option -g display-panes-active-colour "${color_light_steel_blue}"
set-option -g display-panes-colour "${color_hot_pink}"
